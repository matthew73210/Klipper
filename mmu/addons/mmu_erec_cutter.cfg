# Include servo hardware definition separately to allow for automatic upgrade
[include mmu_erec_cutter_hw.cfg]

###########################################################################
# Optional EREC Filament Cutter Support
#
# https://github.com/kevinakasam/ERCF_Filament_Cutter
# 
# This is the supplementary macro to support filament cutting at the MMU
# on a ERCF design.
#
# To configure:
# 1. Add this to your printer.cfg:
#
#   [include mmu/addons/mmu_erec_cutter.cfg]
#
# 2. In mmu_macro_vars.cfg, change this line:
#
#   variable_user_post_unload_extension : "EREC_CUTTER_ACTION"
#
# 3. Tune the servo configuration and macro "variables" below
#

# EREC CUTTER CONFIGURATION -----------------------------------------------
#   (addons/mmu_erec_cutter.cfg)
#
[gcode_macro _EREC_VARS]
description: Empty macro to store the variables
gcode: # Leave empty

# These variables control the servo movement
variable_servo_closed_angle   : 70	; Servo angle for closed position with bowden aligned MMU
variable_servo_open_angle     : 10	; Servo angle to open up the cutter and move bowden away from MMU
variable_servo_duration       : 1.5	; Time (s) of PWM pulse train to activate servo
variable_servo_idle_time      : 1.8	; Time (s) to let the servo to reach it's position

# Controls for feed and cut lengths
variable_feed_length          : 48	; Distance in mm from gate parking position to blade (ERCFv1.1: 58, v2/other: 48)
